<div class="page-container" [ngClass]="{'sidebar_is_full': app.sidebarState, 'sidebar_is_small': !app.sidebarState}">

  <!-- Content Wrapper START -->
  <div class="main-content">
    <div class="card">
      <div class="card-header">
        <h2>Citas </h2>
      </div>
      <div class="card-body">
        <div class="row">
          <nav>
            <div class="nav nav-tabs" id="list-tab" role="tablist">
              <a (click)="desfiltrar()" class="nav-link active" id="list-home-list" data-bs-toggle="tab" href="#list-home" role="tab"
                aria-controls="list-home">Pendientes</a>
              <a (click)="desfiltrar()" class="nav-link" id="list-profile-list" data-bs-toggle="tab" href="#list-profile" role="tab"
                aria-controls="list-profile">Realizadas</a>
              <a (click)="desfiltrar()" class="nav-link" id="list-messages-list" data-bs-toggle="tab" href="#list-messages" role="tab"
                aria-controls="list-messages">No Realizadas</a>
            </div>
          </nav>
          <div class="col-12 mt-5">

            <div class="tab-content" id="nav-tabContent">
              <div class="tab-pane fade show active" id="list-home" role="tabpanel" aria-labelledby="list-home-list">
                <label for="date">Buscar por fecha</label>
                <input type="date" (change)="filtroFecha()" [(ngModel)]="fecha" class="form-control fecha" name="fecha"
                  id="fecha">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">Inversionista</th>
                      <th scope="col">Telefono</th>
                      <th scope="col">Celular</th>
                      <th scope="col">Whatsapp</th>
                      <th scope="col">Fecha</th>
                      <th scope="col">Hora</th>
                      <th scope="col"></th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let item of Llamadas">
                      <tr *ngIf="item.IdStatus == 2">
                        <td> {{ item.Nombre_Completo }}</td>
                        <td> {{ item.Num_Tel }}</td>
                        <td> {{ item.Num_Cel }}</td>
                        <td> {{ item.Whatsapp }}</td>
                        <td> {{ item.Fch_Cita }}</td>
                        <td> {{ item.Hora_Cita }}</td>
                        <td><button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="Registro(item)" class="btn btn-outline-primary">Cambiar status</button></td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
              <div class="tab-pane fade" id="list-profile" role="tabpanel" aria-labelledby="list-profile-list">
                <label for="date">Buscar por fecha</label>
                <input type="date" (change)="filtroFecha()" [(ngModel)]="fecha" class="form-control fecha" name="fecha"
                  id="fecha">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">Inversionista</th>
                      <th scope="col">Telefono</th>
                      <th scope="col">Celular</th>
                      <th scope="col">Whatsapp</th>
                      <th scope="col">Fecha</th>
                      <th scope="col">Hora</th>
                      <th scope="col">Comentario</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let realizadas of Llamadas">
                      <tr *ngIf="realizadas.IdStatus == 1">
                        <td> {{ realizadas.Nombre_Completo }}</td>
                        <td> {{ realizadas.Num_Tel }}</td>
                        <td> {{ realizadas.Num_Cel }}</td>
                        <td> {{ realizadas.Whatsapp }}</td>
                        <td> {{ realizadas.Fch_Cita }}</td>
                        <td> {{ realizadas.Hora_Cita }}</td>
                        <td> {{ realizadas.Nota }}</td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
              <div class="tab-pane fade" id="list-messages" role="tabpanel" aria-labelledby="list-messages-list">
                <label for="date">Buscar por fecha</label>
                <div class="flex-row">
                   <input type="date" (change)="filtroFecha()" [(ngModel)]="fecha" class="form-control fecha" name="fecha"
                  id="fecha">
                </div>
               
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">Inversionista</th>
                      <th scope="col">Telefono</th>
                      <th scope="col">Celular</th>
                      <th scope="col">Whatsapp</th>
                      <th scope="col">Fecha</th>
                      <th scope="col">Hora</th>
                      <th scope="col">Motivo</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let norealizadas of Llamadas">
                        <tr *ngIf="norealizadas.IdStatus == 3">
                          <td> {{ norealizadas.Nombre_Completo }}</td>
                          <td> {{ norealizadas.Num_Tel }}</td>
                          <td> {{ norealizadas.Num_Cel }}</td>
                          <td> {{ norealizadas.Whatsapp }}</td>
                          <td> {{ norealizadas.Fch_Cita }}</td>
                          <td> {{ norealizadas.Hora_Cita }}</td>
                          <td> {{ norealizadas.Nota }}</td>
                        </tr>
                      </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
 <!-- Button trigger modal -->

  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Llamada de: {{cita.Nombre_Completo}}</h5>
        </div>
        <div class="modal-body">
            <select name="status" class="form-control" id="status" [(ngModel)]="status">
                <option value="null" selected disabled>Selecciona una opci√≥n</option>
                <option value="1">Llamada realizada</option>
                <option value="3">Llamada no realizada</option>
            </select>
            <br>
            <label *ngIf="status == 1" for="nota">
                Comentarios:
            </label>
            <label *ngIf="status == 3" for="nota">
                Motivo:
            </label>
            <textarea maxlength="500" *ngIf="status != null" class="form-control" [(ngModel)]="nota" name="nota" id="" cols="30" rows="5"></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="CambiarStatus()" data-bs-dismiss="modal">Actualizar cita</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Content Wrapper END -->

  <!-- Footer START -->
  <app-footer></app-footer>
  <!-- Footer END -->

</div>
